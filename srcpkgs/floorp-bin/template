# Template file for 'floorp-bin'
pkgname=floorp-bin
_pkgname=floorp
version=12.1.4
revision=1
archs="x86_64"
depends="gtk+3 desktop-file-utils hicolor-icon-theme"
short_desc="Advanced and Fast Firefox derivative"
maintainer="nerdyslacker <karyan40024@gmail.com>"
license="MPL-2.0, GPL-2.0-or-later, LGPL-2.1-or-later"
homepage="https://floorp.app/en"
distfiles="https://github.com/Floorp-Projects/Floorp/releases/download/v${version}/${_pkgname}-linux-amd64.tar.xz"
checksum=86a5d86a52f3778ca3d3b7b250c3e36820ab792232e8dd8cd4482586e9c1f2f1
nopie=yes
replaces="floorp"

do_install() {
	vmkdir usr/lib/${_pkgname}
	vmkdir usr/share/applications
	vmkdir usr/bin
	vmkdir usr/share/pixmaps

	vcopy * usr/lib/${_pkgname}
	vinstall ${FILESDIR}/${_pkgname}.desktop 644 usr/share/applications
	vinstall ${FILESDIR}/policies.json 644 usr/lib/${_pkgname}/distribution
	vcopy ${DESTDIR}/usr/lib/${_pkgname}/browser/chrome/icons/default/default128.png usr/share/pixmaps/${_pkgname}.png

	ln -frs ${DESTDIR}/usr/lib/${_pkgname}/${_pkgname} ${DESTDIR}/usr/bin
}
