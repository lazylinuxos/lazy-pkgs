# Template file for 'firedragon-bin'
pkgname=firedragon-bin
version=12.5.1
revision=1
archs="x86_64"
create_wrksrc=yes
build_style=meta
hostmakedepends="tar"
depends="dbus dbus-glib ffmpeg gtk+3 libevent libjpeg-turbo libpulseaudio libXScrnSaver libXt libvpx libwebp mime-types nss pipewire zlib" 
short_desc="Floorp fork build using custom branding"
maintainer="nerdyslacker <karyan40024@gmail.com>"
license="MPL2"
homepage="https://firedragon.garudalinux.org"
distfiles="https://gitlab.com/garuda-linux/firedragon/firedragon12/-/releases/v${version}/downloads/firedragon-linux-x64.tar.xz"
checksum=24218ecf3cc9fc8cf43666704bb10d5d10a0086e6af3be2e351cca0bad2b625f
replaces="firedragon"

do_install() {
	vmkdir usr/lib
	vcopy ${wrksrc}/* usr/lib

	vmkdir usr/share
	vinstall ${FILESDIR}/firedragon.desktop 644 usr/share/applications/
	
	for i in 16 32 48 64 128; do
		vinstall ${wrksrc}/firedragon/browser/chrome/icons/default/default$i.png 644 usr/share/icons/hicolor/${i}x${i}/apps ${pkgname}.png
    done

	# link the binary
	vmkdir usr/bin/
	ln -s /usr/lib/firedragon/firedragon-bin ${DESTDIR}/usr/bin/firedragon
}
